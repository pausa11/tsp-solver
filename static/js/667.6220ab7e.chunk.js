(()=>{var t={6258:(t,e,s)=>{"use strict";var i=s(6110),o=s(9207),n=s(2364),r=s.n(n);class a{constructor(t){this.parent=Array.from({length:t},((t,e)=>e)),this.rank=Array(t).fill(0)}find(t){return this.parent[t]!==t&&(this.parent[t]=this.find(this.parent[t])),this.parent[t]}union(t,e){const s=this.find(t),i=this.find(e);s!==i&&(this.rank[s]<this.rank[i]?this.parent[s]=i:this.rank[s]>this.rank[i]?this.parent[i]=s:(this.parent[i]=s,this.rank[s]++))}}class l{constructor(t){this.locations=t,this.graph=this.createCompleteGraph(t),this.startNode=0,this.totalNodes=t.length,this.memoizedHeuristics=new Map,this.timeLimit=99e3,this.startTime=Date.now(),this.bestSolution=null,this.lastUpdate=Date.now(),this.distanceMatrix=this.createDistanceMatrix(),this.initialVisited=new Array(this.totalNodes).fill(!1),this.initialVisited[this.startNode]=!0}createDistanceMatrix(){const t=Array(this.totalNodes).fill().map((()=>Array(this.totalNodes)));for(let e=0;e<this.totalNodes;e++){for(let s=e+1;s<this.totalNodes;s++){const o=i.IoC([this.locations[e].x,this.locations[e].y],[this.locations[s].x,this.locations[s].y]);t[e][s]=o,t[s][e]=o}t[e][e]=0}return t}createCompleteGraph(t){const e=new o.Graph({directed:!1}),s=t.length;for(let o=0;o<s;o++)for(let n=o+1;n<s;n++){const s=i.IoC([t[o].x,t[o].y],[t[n].x,t[n].y]);e.setEdge(o,n,s)}return e}getDistance(t,e){return this.distanceMatrix[t][e]}visitedToString(t,e){return`${e}-${t.join("")}`}getUnvisitedNodes(t){const e=[];for(let s=0;s<this.totalNodes;s++)t[s]||e.push(s);return e}kruskalMST(t){if(t.length<=1)return 0;const e=[],s=t.length;for(let a=0;a<s;a++){const i=t[a];for(let o=a+1;o<s;o++){const s=t[o];e.push({v:i,w:s,weight:this.getDistance(i,s)})}}e.sort(((t,e)=>t.weight-e.weight));const i=new a(this.totalNodes);let o=0,n=0;const r=s-1;for(const a of e)if(i.find(a.v)!==i.find(a.w)&&(o+=a.weight,i.union(a.v,a.w),n++,n===r))break;return o}calculateMSTHeuristic(t,e){const s=this.getUnvisitedNodes(e);if(0===s.length)return 0;const i=this.visitedToString(e,t),o=this.memoizedHeuristics.get(i);if(void 0!==o)return o;if(1===s.length){const e=this.getDistance(t,s[0]);return this.memoizedHeuristics.set(i,e),e}const n=this.kruskalMST(s);let r=1/0;for(const l of s){const e=this.getDistance(t,l);e<r&&(r=e)}const a=n+r;return this.memoizedHeuristics.set(i,a),a}countVisited(t){return t.reduce(((t,e)=>t+(e?1:0)),0)}updateBestSolution(t){this.bestSolution=t;const e=Date.now();e-this.lastUpdate>1e3&&(this.lastUpdate=e,console.log(`Nueva mejor soluci\xf3n encontrada: ${t.totalCost}`))}findInitialSolution(){const t=new Array(this.totalNodes).fill(!1);t[this.startNode]=!0;let e=this.startNode;const s=[this.startNode];let i=0;for(let o=1;o<this.totalNodes;o++){let o=-1,n=1/0;for(let s=0;s<this.totalNodes;s++)if(!t[s]){const t=this.getDistance(e,s);t<n&&(n=t,o=s)}t[o]=!0,s.push(o),i+=n,e=o}return i+=this.getDistance(e,this.startNode),s.push(this.startNode),{path:s,totalCost:i}}solve(){this.bestSolution=this.findInitialSolution(),console.log(`Soluci\xf3n inicial encontrada: ${this.bestSolution.totalCost}`);const t=new(r())(((t,e)=>e.f-t.f)),e={currentNode:this.startNode,visited:[...this.initialVisited],path:[this.startNode],g:0,h:this.calculateMSTHeuristic(this.startNode,this.initialVisited),f:0};e.f=e.g+e.h,t.enq(e);let s=0,i=Date.now();for(;!t.isEmpty();){const e=Date.now();if(e-this.startTime>this.timeLimit)return console.log(`Tiempo l\xedmite alcanzado. Nodos explorados: ${s}`),console.log(`Mejor soluci\xf3n encontrada: ${this.bestSolution.totalCost}`),this.bestSolution;e-i>1e3&&(console.log(`Progreso: ${s} nodos explorados, mejor soluci\xf3n: ${this.bestSolution.totalCost}`),i=e);const o=t.deq();if(s++,this.countVisited(o.visited)!==this.totalNodes){if(!(this.bestSolution&&o.f>=1.1*this.bestSolution.totalCost)){for(let e=0;e<this.totalNodes;e++)if(!o.visited[e]){const s=[...o.visited];s[e]=!0;const i=o.g+this.getDistance(o.currentNode,e);if(this.bestSolution&&i>=this.bestSolution.totalCost)continue;const n=this.calculateMSTHeuristic(e,s),r=i+n;if(this.bestSolution&&r>=this.bestSolution.totalCost)continue;t.enq({currentNode:e,visited:s,path:[...o.path,e],g:i,h:n,f:r})}s%1e4===0&&this.memoizedHeuristics.size>1e6&&this.memoizedHeuristics.clear()}}else{const t=this.getDistance(o.currentNode,this.startNode),e=o.g+t,s=[...o.path,this.startNode];(!this.bestSolution||e<this.bestSolution.totalCost)&&this.updateBestSolution({path:s,totalCost:e})}}return this.bestSolution}}self.onmessage=function(t){const{type:e,data:s}=t.data;if("solve"===e)try{var i;console.log("Worker: Starting TSP solution");const t=new l(s),e=t.solve(),o={type:"progress",data:{nodesExplored:t.nodesExplored,currentBest:null===(i=t.bestSolution)||void 0===i?void 0:i.totalCost}};self.postMessage(o),self.postMessage({type:"solution",data:e})}catch(o){self.postMessage({type:"error",data:o.message})}}},1234:()=>{}},e={};function s(i){var o=e[i];if(void 0!==o)return o.exports;var n=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=t,s.x=()=>{var t=s.O(void 0,[133],(()=>s(6258)));return t=s.O(t)},s.amdD=function(){throw new Error("define cannot be used indirect")},s.amdO={},(()=>{var t=[];s.O=(e,i,o,n)=>{if(!i){var r=1/0;for(c=0;c<t.length;c++){i=t[c][0],o=t[c][1],n=t[c][2];for(var a=!0,l=0;l<i.length;l++)(!1&n||r>=n)&&Object.keys(s.O).every((t=>s.O[t](i[l])))?i.splice(l--,1):(a=!1,n<r&&(r=n));if(a){t.splice(c--,1);var h=o();void 0!==h&&(e=h)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[i,o,n]}})(),s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.f={},s.e=t=>Promise.all(Object.keys(s.f).reduce(((e,i)=>(s.f[i](t,e),e)),[])),s.u=t=>"static/js/"+t+".c2e388aa.chunk.js",s.miniCssF=t=>{},s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),s.p="/tsp-solver/",(()=>{var t={667:1};s.f.i=(e,i)=>{t[e]||importScripts(s.p+s.u(e))};var e=self.webpackChunktsp=self.webpackChunktsp||[],i=e.push.bind(e);e.push=e=>{var o=e[0],n=e[1],r=e[2];for(var a in n)s.o(n,a)&&(s.m[a]=n[a]);for(r&&r(s);o.length;)t[o.pop()]=1;i(e)}})(),(()=>{var t=s.x;s.x=()=>s.e(133).then(t)})();s.x()})();
//# sourceMappingURL=667.6220ab7e.chunk.js.map